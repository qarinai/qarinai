<div class="flex flex-col gap-4">
  <p-fileupload
    mode="advanced"
    [multiple]="true"
    class="w-full"
    name="file"
    url="/api/files/upload"
    [showUploadButton]="true"
    [showCancelButton]="true"
    (onUpload)="onUploadFinished($event)"
  >
    <ng-template #empty>
      <div>Drag and drop files to here to upload as content sources.</div>
      <p>Allowed File Types are: txt pdf docx pptx csv json</p>
    </ng-template>
  </p-fileupload>
  <div class="w-full">
    <p-table #dt [value]="sourceFiles()" [columns]="[]" [rowHover]="false" [dataKey]="'id'" [paginator]="false">
      <ng-template #header>
        <tr>
          <th>Name</th>
          <th>Size</th>
          <th>Type</th>
          <th></th>
        </tr>
      </ng-template>
      <ng-template #body let-file>
        <tr>
          <td>{{ file.name }}</td>
          <td>{{ file.size | number }} bytes</td>
          <td>{{ file.mimeType }}</td>
          <td>
            <p-button icon="pi pi-trash" severity="danger" rounded outlined (onClick)="removeFile(file)"></p-button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <div class="w-full flex justify-end">
    <p-button
      icon="pi pi-check"
      label="Add Source"
      class="ml-2"
      [disabled]="sourceFiles().length === 0"
      (onClick)="saveSources($event)"
    ></p-button>
    <p-button
      icon="pi pi-times"
      label="Cancel"
      class="ml-2"
      (onClick)="closeModal($event)"
      [disabled]="!dialogRef.visible"
    ></p-button>
  </div>
</div>
